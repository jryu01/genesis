<div class="feeder">
  <!-- input -->
  <div class="panel panel-default">
    <form name="postForm" ng-submit="submitPost()">
      <div class="panel-body" style="padding: 0px">     
        <textarea ng-model="postText"  ng-minlength=3 class="postings" placeholder="What is going on today?" required></textarea>
      </div>
      <div class="panel-footer">
        <div class="pull-right">
            <input type="submit" class="btn btn-default btn-sm" >
        </div>
        <div class="clearfix"></div>
      </div>
      <p class="bg-danger" style="margin:0"ng-show="postForm.$error.minlength">Text is too short!</p>
    </form>
  </div>
  <!-- make this as a directive -->
  <div ng-repeat="post in posts" class="panel panel-default">
    <div class="panel-body">
      <div class="post-heading">
          <img class="pull-left img-rounded" src="https://lorempixel.com/50/50/" style="margin-right: 7px">
          <h5><a href >{{ post.createdBy.name }}</a></h5>
          <span class="date-text"> {{ post.createdAt | date:'MMM d' }} </span>
        <div class="clearfix"></div>
      </div>
      <div class="post-body">
        <p class="text-wrap">{{ post.contents }}</p>
      </div>
      <div class="pull-left">
<!--                   {{ post.scorers }}
            { currentUser.id }
            {{ post.scorers.indexOf(currentUser.id) }}
 -->
        <!-- Toggle Score btn functionality -->
        <button ng-show="post.scorers.indexOf(currentUser.id) >= 0" class="btn btn-warning btn-xs" ng-click="removeScore(post.id)">
          <span ng-show="post.score > 0">{{ post.score }}</span> 
          Score
        </button>
        <button ng-show="post.scorers.indexOf(currentUser.id) < 0" class="btn btn-default btn-xs" ng-click="addScore(post.id)">
          <span ng-show="post.score > 0">{{ post.score }}</span> 
          Score
        </button>
      </div>
      <div class="clearfix"></div>
    </div>
    <div class="panel-footer">
      <div class="comments-toggle">
        <span ng-show="!commentsExpand" ng-click="loadComments(post.id)">
        <a href >
          {{ post.numComments }} Comments
        </a> 
        <i class="fa fa-chevron-down fa-1x"></i>
        </span>
        <a href ng-show="commentsExpand" ng-click="hideComments()">Hide Comments</a>
      </div>
      <div class="">
        <div class="comments-container">
          <div ng-repeat="comment in post.comments">
            <div class="comment-body">
              <a href><img class="img-rounded profile-img" src="https://lorempixel.com/30/30/"></a>
              <div>
                <a href class="profile-name pull-left">{{ comment.createdBy.name }}</a>
                <span class="text-wrap"> {{ comment.text }} </span>
                <div class="clearfix" style="height:0"></div>
                <span class="date-text"> {{ comment.createdAt | date:'MMM d' }} </span>
                <!-- <a href>Score</a> <span> {{ comment.score}}</span> -->
              </div>
            </div>
          </div> 
        </div>
        <div class="comment-form">
          <img class="img-rounded profile-img" src="https://lorempixel.com/30/30/">
          <form name="commentForm" ng-submit="addComment(post.id)">
            <input class="comment-input" ng-model="commentText" type="text" placeholder="Write a Comment" required>
          </form>
        </div>
      </div>
    </div>
  </div> 
  <button ng-show="!loading" type="button" ng-click="loadMorePosts()" style="color: white; background-color:orange" class="btn  btn-sm btn-block">Load More</button>
  <p ng-show="loading" class="text-center" style="color:orange"><i class="fa fa-refresh fa-spin fa-2x"></i></p>
</div>